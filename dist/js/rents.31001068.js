(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["rents"],{abfa:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"rents page",attrs:{id:"rents"}},[r("div",{staticClass:"flex flex-align--center"},[r("h2",{staticClass:"sub-title flex-grow--1 margin-right--1",domProps:{textContent:e._s("Rents history")}}),r("button-item",{staticClass:"btn--small flex-grow--0",attrs:{name:"return-button",text:"< Return",id:"return-button"},on:{click:function(t){return e.$router.go(-1)}}})],1),e.loading?r("spinner"):e._e(),e.rents.length||e.errorMessage||e.loading?e._e():r("alert",{attrs:{type:"info",content:"No rents..."}}),e.errorMessage.length?r("alert",{attrs:{type:"error",content:e.errorMessage}}):e._e(),e.addFormVisible?r("rent-form",{attrs:{label:"Add copy"},on:{submit:e.addRent,cancel:function(t){e.addFormVisible=!1}}}):e._e(),e.editFormVisible?r("rent-form",{attrs:{type:"edit",data:e.rentToEdit,label:"Edit copy"},on:{submit:e.editRent,cancel:function(t){e.editFormVisible=!1}}}):e._e(),e.rents.length?r("rents-list",{attrs:{rents:e.rents},on:{remove:e.removeRent,edit:function(t){e.rentToEdit=t,e.editFormVisible=!0}}}):e._e(),r("button-item",{attrs:{name:"add-rent-button",text:"Rent this copy",id:"add-rent-button"},on:{click:function(t){e.addFormVisible=!0}}})],1)},a=[],s=(r("96cf"),r("1da1")),i=r("5530"),o=r("052b"),c=r("b3a5"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{staticClass:"rents-list list"},e._l(e.rents,(function(t){return r("li",{key:t.id,staticClass:"rents-list__rent list__item",attrs:{id:"rent-"+t.id}},[r("div",{staticClass:"rents-list__rent__customer-name list__item__col list__item__col--primary",domProps:{textContent:e._s(t.customerName)}}),r("div",{staticClass:"rents-list__rent__rent-date list__item__col",domProps:{textContent:e._s(t.rentDate)}}),r("div",{staticClass:"rents-list__rent__rent-date list__item__col",domProps:{textContent:e._s("(expiration: "+t.expirationDate+")")}}),r("div",{staticClass:"rents-list__rent__actions list__item__actions"},[r("button-item",{staticClass:"edit-btn btn--small",attrs:{text:"Edit",variant:"warning"},on:{click:function(r){return e.$emit("edit",t)}}}),r("button-item",{staticClass:"remove-btn btn--small",attrs:{text:"Remove",variant:"error"},on:{click:function(r){return e.$emit("remove",t.id)}}})],1)])})),0)},u=[],m=r("2eef"),d={name:"RentsList",props:{rents:{type:Array,required:!0}},components:{ButtonItem:m["a"]}},p=d,f=r("2877"),b=Object(f["a"])(p,l,u,!1,null,null,null),g=b.exports,_=r("1ff0"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("fog",{on:{cancel:function(t){return e.$emit("cancel")}}},[r("form",{staticClass:"form rent-form form--short form--uncut",on:{submit:function(t){return t.preventDefault(),e.handleSubmit(t)}}},[r("h2",{staticClass:"sub-rent",domProps:{textContent:e._s(e.label)}}),e.errorMessage.length?r("alert",{attrs:{type:"error",content:e.errorMessage}}):e._e(),r("input-field",{attrs:{name:"customer-name",type:"text",label:"Customer name"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}}),r("datepicker",{staticClass:"input",attrs:{id:"rent-date",name:"rent-date",label:"Rent date",format:"yyyy-MM-dd"},model:{value:e.form.rentDate,callback:function(t){e.$set(e.form,"rentDate",t)},expression:"form.rentDate"}}),"edit"===e.type?r("datepicker",{staticClass:"input",attrs:{id:"expiration-date",name:"expiration-date",label:"Expiration date",format:"yyyy-MM-dd"},model:{value:e.form.expirationDate,callback:function(t){e.$set(e.form,"expirationDate",t)},expression:"form.expirationDate"}}):e._e(),r("button-rent",{attrs:{name:"submit-button",text:e.label,variant:"primary"},on:{click:e.handleSubmit}})],1)])},x=[],v=(r("d3b7"),r("ddb0"),r("8fd1")),R=r("0c18"),y=r("4742"),k=r("025e"),w={name:"RentForm",props:{data:Object,label:String,type:{type:String,default:"add"}},data:function(){return{form:{id:null,customerName:"",rentDate:"",expirationDate:""},errorMessage:""}},methods:{handleSubmit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.errorMessage="",e.t0=regeneratorRuntime.keys(t.form);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(r=e.t1.value,t.form[r]||"id"===r){e.next=7;break}return t.errorMessage='"'.concat(r,"\" field shouldn't be empty..."),e.abrupt("return",!1);case 7:e.next=2;break;case 9:t.$emit("submit",t.form);case 10:case"end":return e.stop()}}),e)})))()}},created:function(){this.data&&(this.form=JSON.parse(JSON.stringify(this.data))),"add"===this.type&&(this.form.rentDate=Object(k["b"])(new Date),this.form.expirationDate=Object(k["b"])(Object(k["a"])(new Date,3)))},components:{Alert:c["a"],ButtonRent:m["a"],Fog:v["a"],Datepicker:y["a"],InputField:R["a"]}},C=w,M=Object(f["a"])(C,h,x,!1,null,null,null),O=M.exports,j=r("2f62"),D={name:"Rents",mixins:[o["a"]],data:function(){return{loading:!1,errorMessage:"",rentToEdit:null,editFormVisible:!1,addFormVisible:!1}},computed:{rents:function(){return this.$store.state.rents}},methods:Object(i["a"])({},Object(j["b"])(["fetchRents","addRentRequest","removeRentRequest","updateRentRequest"]),{removeRent:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.loading=!0,t.errorMessage="",r.prev=2,r.next=5,t.removeRentRequest(e);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),t.errorMessage=r.t0.message;case 10:t.loading=!1;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()},addRent:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.addFormVisible=!1,t.loading=!0,t.errorMessage="",r.prev=3,r.next=6,t.addRentRequest(Object(i["a"])({},e,{itemId:t.$route.params.itemId}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](3),t.errorMessage=r.t0.message;case 11:t.loading=!1;case 12:case"end":return r.stop()}}),r,null,[[3,8]])})))()},editRent:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.editFormVisible=!1,t.loading=!0,t.errorMessage="",r.prev=3,r.next=6,t.updateRentRequest(Object(i["a"])({},e));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](3),t.errorMessage=r.t0.message;case 11:t.loading=!1;case 12:case"end":return r.stop()}}),r,null,[[3,8]])})))()}}),created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.loading=!0,e.errorMessage="",t.prev=2,e.$route.params.itemId){t.next=7;break}throw new Error("No item selected");case 7:return t.next=9,e.fetchRents(e.$route.params.itemId);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.errorMessage=t.t0.message;case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))()},components:{Alert:c["a"],RentsList:g,Spinner:_["a"],RentForm:O,ButtonItem:m["a"]}},$=D,F=Object(f["a"])($,n,a,!1,null,null,null);t["default"]=F.exports}}]);
//# sourceMappingURL=rents.31001068.js.map