(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["items"],{1901:function(t,e,r){},b9fd:function(t,e,r){"use strict";var s=r("1901"),a=r.n(s);a.a},eb93:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"title-copies page",attrs:{id:"title-copies"}},[r("div",{staticClass:"flex flex-align--center"},[r("h2",{staticClass:"sub-title flex-grow--1 margin-right--1",domProps:{textContent:t._s("List of copies")}}),r("button-item",{staticClass:"btn--small flex-grow--0",attrs:{name:"return-button",text:"< Return",id:"return-button"},on:{click:function(e){return t.$router.go(-1)}}})],1),t.loading?r("spinner"):t._e(),t.items.length||t.errorMessage||t.loading?t._e():r("alert",{attrs:{type:"info",content:"No copies..."}}),t.errorMessage.length?r("alert",{attrs:{type:"error",content:t.errorMessage}}):t._e(),t.addFormVisible?r("item-form",{attrs:{label:"Add copy"},on:{submit:t.addItem,cancel:function(e){t.addFormVisible=!1}}}):t._e(),t.editFormVisible?r("item-form",{attrs:{data:t.itemToEdit,label:"Edit copy"},on:{submit:t.editItem,cancel:function(e){t.editFormVisible=!1}}}):t._e(),t.items.length?r("items-list",{attrs:{items:t.items},on:{remove:t.removeItem,edit:function(e){t.itemToEdit=e,t.editFormVisible=!0}}}):t._e(),r("button-item",{attrs:{name:"add-item-button",text:"Add new",id:"add-item-button"},on:{click:function(e){t.addFormVisible=!0}}})],1)},a=[],n=(r("96cf"),r("1da1")),i=r("5530"),o=r("052b"),c=r("b3a5"),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"items-list list"},t._l(t.items,(function(e,s){return r("li",{key:e.id,staticClass:"items-list__item list__item",attrs:{id:"item-"+e.id}},[r("div",{staticClass:"items-list__item__index list__item__col",domProps:{textContent:t._s(s+1+".")}}),r("div",{staticClass:"items-list__item__purchase-date list__item__col list__item__col--primary",domProps:{textContent:t._s(e.purchaseDate)}}),r("div",{class:"items-list__item__status list__item__col "+("RENTED"===e.status?"items-list__item__status--rented":"items-list__item__status--available"),domProps:{textContent:t._s(t.statuses[e.status])}}),r("div",{staticClass:"items-list__item__actions list__item__actions"},[r("router-link",{attrs:{to:"/rents/"+e.id}},[r("button-item",{staticClass:"show-rents-btn btn--small",attrs:{text:"Show history",variant:"primary"}})],1),r("button-item",{staticClass:"edit-btn btn--small",attrs:{text:"Edit",variant:"warning"},on:{click:function(r){return t.$emit("edit",e)}}}),r("button-item",{staticClass:"remove-btn btn--small",attrs:{text:"Remove",variant:"error"},on:{click:function(r){return t.$emit("remove",e.id)}}})],1)])})),0)},m=[],l=r("2eef"),d={name:"ItemsList",data:function(){return{statuses:{AVAILABLE:"Available",RENTED:"Rented"}}},props:{items:{type:Array,required:!0}},components:{ButtonItem:l["a"]}},p=d,f=(r("b9fd"),r("2877")),b=Object(f["a"])(p,u,m,!1,null,null,null),_=b.exports,g=r("1ff0"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("fog",{on:{cancel:function(e){return t.$emit("cancel")}}},[r("form",{staticClass:"form item-form form--short form--uncut",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[r("h2",{staticClass:"sub-item",domProps:{textContent:t._s(t.label)}}),t.errorMessage.length?r("alert",{attrs:{type:"error",content:t.errorMessage}}):t._e(),r("datepicker",{staticClass:"input",attrs:{id:"purchase-date",name:"purchase-date",label:"Purchase date",format:"yyyy-MM-dd"},model:{value:t.form.purchaseDate,callback:function(e){t.$set(t.form,"purchaseDate",e)},expression:"form.purchaseDate"}}),r("button-item",{attrs:{name:"submit-button",text:t.label,variant:"primary"},on:{click:t.handleSubmit}})],1)])},v=[],x=(r("d3b7"),r("ddb0"),r("8fd1")),w=r("4742"),I={name:"ItemForm",props:{data:Object,label:String},data:function(){return{form:{id:null,purchaseDate:"2020-02-02",status:"AVAILABLE"},errorMessage:""}},methods:{handleSubmit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.errorMessage="",t.t0=regeneratorRuntime.keys(e.form);case 2:if((t.t1=t.t0()).done){t.next=9;break}if(r=t.t1.value,e.form[r]||"id"===r){t.next=7;break}return e.errorMessage='"'.concat(r,"\" field shouldn't be empty..."),t.abrupt("return",!1);case 7:t.next=2;break;case 9:e.$emit("submit",e.form);case 10:case"end":return t.stop()}}),t)})))()}},created:function(){this.data&&(this.form=JSON.parse(JSON.stringify(this.data)))},components:{Alert:c["a"],ButtonItem:l["a"],Fog:x["a"],Datepicker:w["a"]}},k=I,R=Object(f["a"])(k,h,v,!1,null,null,null),C=R.exports,y=r("2f62"),M={name:"Items",mixins:[o["a"]],data:function(){return{loading:!1,errorMessage:"",itemToEdit:null,editFormVisible:!1,addFormVisible:!1}},computed:{items:function(){return this.$store.state.items}},methods:Object(i["a"])({},Object(y["b"])(["fetchItems","addItemRequest","removeItemRequest","updateItemRequest"]),{removeItem:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.loading=!0,e.errorMessage="",r.prev=2,r.next=5,e.removeItemRequest(t);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](2),e.errorMessage=r.t0.message;case 10:e.loading=!1;case 11:case"end":return r.stop()}}),r,null,[[2,7]])})))()},addItem:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.addFormVisible=!1,e.loading=!0,e.errorMessage="",r.prev=3,r.next=6,e.addItemRequest({purchaseDate:t.purchaseDate,status:t.status,titleId:e.$route.params.titleId});case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](3),e.errorMessage=r.t0.message;case 11:e.loading=!1;case 12:case"end":return r.stop()}}),r,null,[[3,8]])})))()},editItem:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.editFormVisible=!1,e.loading=!0,e.errorMessage="",r.prev=3,r.next=6,e.updateItemRequest(Object(i["a"])({},t));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](3),e.errorMessage=r.t0.message;case 11:e.loading=!1;case 12:case"end":return r.stop()}}),r,null,[[3,8]])})))()}}),created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,t.errorMessage="",e.prev=2,t.$route.params.titleId){e.next=7;break}throw new Error("No title selected");case 7:return e.next=9,t.fetchItems(t.$route.params.titleId);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.errorMessage=e.t0.message;case 14:t.loading=!1;case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))()},components:{Alert:c["a"],ItemsList:_,Spinner:g["a"],ButtonItem:l["a"],ItemForm:C}},E=M,O=Object(f["a"])(E,s,a,!1,null,null,null);e["default"]=O.exports}}]);
//# sourceMappingURL=items.5aaa4f69.js.map